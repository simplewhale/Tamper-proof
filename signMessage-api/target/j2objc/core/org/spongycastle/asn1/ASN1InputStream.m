//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/alen/Downloads/signMessage-api/target/classes/core/org/spongycastle/asn1/ASN1InputStream.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/ByteArrayInputStream.h"
#include "java/io/EOFException.h"
#include "java/io/FilterInputStream.h"
#include "java/io/IOException.h"
#include "java/io/InputStream.h"
#include "java/lang/IllegalArgumentException.h"
#include "org/spongycastle/asn1/ASN1BitString.h"
#include "org/spongycastle/asn1/ASN1Boolean.h"
#include "org/spongycastle/asn1/ASN1Encodable.h"
#include "org/spongycastle/asn1/ASN1EncodableVector.h"
#include "org/spongycastle/asn1/ASN1Enumerated.h"
#include "org/spongycastle/asn1/ASN1Exception.h"
#include "org/spongycastle/asn1/ASN1GeneralizedTime.h"
#include "org/spongycastle/asn1/ASN1InputStream.h"
#include "org/spongycastle/asn1/ASN1Integer.h"
#include "org/spongycastle/asn1/ASN1ObjectIdentifier.h"
#include "org/spongycastle/asn1/ASN1OctetString.h"
#include "org/spongycastle/asn1/ASN1Primitive.h"
#include "org/spongycastle/asn1/ASN1Sequence.h"
#include "org/spongycastle/asn1/ASN1Set.h"
#include "org/spongycastle/asn1/ASN1StreamParser.h"
#include "org/spongycastle/asn1/ASN1UTCTime.h"
#include "org/spongycastle/asn1/BERApplicationSpecificParser.h"
#include "org/spongycastle/asn1/BEROctetString.h"
#include "org/spongycastle/asn1/BEROctetStringParser.h"
#include "org/spongycastle/asn1/BERSequenceParser.h"
#include "org/spongycastle/asn1/BERSetParser.h"
#include "org/spongycastle/asn1/BERTaggedObjectParser.h"
#include "org/spongycastle/asn1/BERTags.h"
#include "org/spongycastle/asn1/DERApplicationSpecific.h"
#include "org/spongycastle/asn1/DERBMPString.h"
#include "org/spongycastle/asn1/DERExternal.h"
#include "org/spongycastle/asn1/DERExternalParser.h"
#include "org/spongycastle/asn1/DERFactory.h"
#include "org/spongycastle/asn1/DERGeneralString.h"
#include "org/spongycastle/asn1/DERGraphicString.h"
#include "org/spongycastle/asn1/DERIA5String.h"
#include "org/spongycastle/asn1/DERNull.h"
#include "org/spongycastle/asn1/DERNumericString.h"
#include "org/spongycastle/asn1/DEROctetString.h"
#include "org/spongycastle/asn1/DERPrintableString.h"
#include "org/spongycastle/asn1/DERT61String.h"
#include "org/spongycastle/asn1/DERUTF8String.h"
#include "org/spongycastle/asn1/DERUniversalString.h"
#include "org/spongycastle/asn1/DERVideotexString.h"
#include "org/spongycastle/asn1/DERVisibleString.h"
#include "org/spongycastle/asn1/DefiniteLengthInputStream.h"
#include "org/spongycastle/asn1/IndefiniteLengthInputStream.h"
#include "org/spongycastle/asn1/LazyEncodedSequence.h"
#include "org/spongycastle/asn1/StreamUtil.h"
#include "org/spongycastle/util/io/Streams.h"

@interface OrgSpongycastleAsn1ASN1InputStream () {
 @public
  jint limit_;
  jboolean lazyEvaluate_;
  IOSObjectArray *tmpBuffers_;
}

+ (IOSByteArray *)getBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream:(OrgSpongycastleAsn1DefiniteLengthInputStream *)defIn
                                                             withByteArray2:(IOSObjectArray *)tmpBuffers;

+ (IOSCharArray *)getBMPCharBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream:(OrgSpongycastleAsn1DefiniteLengthInputStream *)defIn;

@end

J2OBJC_FIELD_SETTER(OrgSpongycastleAsn1ASN1InputStream, tmpBuffers_, IOSObjectArray *)

__attribute__((unused)) static IOSByteArray *OrgSpongycastleAsn1ASN1InputStream_getBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream_withByteArray2_(OrgSpongycastleAsn1DefiniteLengthInputStream *defIn, IOSObjectArray *tmpBuffers);

__attribute__((unused)) static IOSCharArray *OrgSpongycastleAsn1ASN1InputStream_getBMPCharBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream_(OrgSpongycastleAsn1DefiniteLengthInputStream *defIn);

@implementation OrgSpongycastleAsn1ASN1InputStream

- (instancetype)initWithJavaIoInputStream:(JavaIoInputStream *)is {
  OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_(self, is);
  return self;
}

- (instancetype)initWithByteArray:(IOSByteArray *)input {
  OrgSpongycastleAsn1ASN1InputStream_initWithByteArray_(self, input);
  return self;
}

- (instancetype)initWithByteArray:(IOSByteArray *)input
                      withBoolean:(jboolean)lazyEvaluate {
  OrgSpongycastleAsn1ASN1InputStream_initWithByteArray_withBoolean_(self, input, lazyEvaluate);
  return self;
}

- (instancetype)initWithJavaIoInputStream:(JavaIoInputStream *)input
                                  withInt:(jint)limit {
  OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_(self, input, limit);
  return self;
}

- (instancetype)initWithJavaIoInputStream:(JavaIoInputStream *)input
                              withBoolean:(jboolean)lazyEvaluate {
  OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withBoolean_(self, input, lazyEvaluate);
  return self;
}

- (instancetype)initWithJavaIoInputStream:(JavaIoInputStream *)input
                                  withInt:(jint)limit
                              withBoolean:(jboolean)lazyEvaluate {
  OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_withBoolean_(self, input, limit, lazyEvaluate);
  return self;
}

- (jint)getLimit {
  return limit_;
}

- (jint)readLength {
  return OrgSpongycastleAsn1ASN1InputStream_readLengthWithJavaIoInputStream_withInt_(self, limit_);
}

- (void)readFullyWithByteArray:(IOSByteArray *)bytes {
  if (OrgSpongycastleUtilIoStreams_readFullyWithJavaIoInputStream_withByteArray_(self, bytes) != ((IOSByteArray *) nil_chk(bytes))->size_) {
    @throw new_JavaIoEOFException_initWithNSString_(@"EOF encountered in middle of object");
  }
}

- (OrgSpongycastleAsn1ASN1Primitive *)buildObjectWithInt:(jint)tag
                                                 withInt:(jint)tagNo
                                                 withInt:(jint)length {
  jboolean isConstructed = (tag & OrgSpongycastleAsn1BERTags_CONSTRUCTED) != 0;
  OrgSpongycastleAsn1DefiniteLengthInputStream *defIn = new_OrgSpongycastleAsn1DefiniteLengthInputStream_initWithJavaIoInputStream_withInt_(self, length);
  if ((tag & OrgSpongycastleAsn1BERTags_APPLICATION) != 0) {
    return new_OrgSpongycastleAsn1DERApplicationSpecific_initWithBoolean_withInt_withByteArray_(isConstructed, tagNo, [defIn toByteArray]);
  }
  if ((tag & OrgSpongycastleAsn1BERTags_TAGGED) != 0) {
    return [new_OrgSpongycastleAsn1ASN1StreamParser_initWithJavaIoInputStream_(defIn) readTaggedObjectWithBoolean:isConstructed withInt:tagNo];
  }
  if (isConstructed) {
    {
      OrgSpongycastleAsn1ASN1EncodableVector *v;
      IOSObjectArray *strings;
      switch (tagNo) {
        case OrgSpongycastleAsn1BERTags_OCTET_STRING:
        v = [self buildDEREncodableVectorWithOrgSpongycastleAsn1DefiniteLengthInputStream:defIn];
        strings = [IOSObjectArray newArrayWithLength:[((OrgSpongycastleAsn1ASN1EncodableVector *) nil_chk(v)) size] type:OrgSpongycastleAsn1ASN1OctetString_class_()];
        for (jint i = 0; i != strings->size_; i++) {
          (void) IOSObjectArray_Set(strings, i, (OrgSpongycastleAsn1ASN1OctetString *) cast_chk([v getWithInt:i], [OrgSpongycastleAsn1ASN1OctetString class]));
        }
        return new_OrgSpongycastleAsn1BEROctetString_initWithOrgSpongycastleAsn1ASN1OctetStringArray_(strings);
        case OrgSpongycastleAsn1BERTags_SEQUENCE:
        if (lazyEvaluate_) {
          return new_OrgSpongycastleAsn1LazyEncodedSequence_initWithByteArray_([defIn toByteArray]);
        }
        else {
          return OrgSpongycastleAsn1DERFactory_createSequenceWithOrgSpongycastleAsn1ASN1EncodableVector_([self buildDEREncodableVectorWithOrgSpongycastleAsn1DefiniteLengthInputStream:defIn]);
        }
        case OrgSpongycastleAsn1BERTags_SET:
        return OrgSpongycastleAsn1DERFactory_createSetWithOrgSpongycastleAsn1ASN1EncodableVector_([self buildDEREncodableVectorWithOrgSpongycastleAsn1DefiniteLengthInputStream:defIn]);
        case OrgSpongycastleAsn1BERTags_EXTERNAL:
        return new_OrgSpongycastleAsn1DERExternal_initWithOrgSpongycastleAsn1ASN1EncodableVector_([self buildDEREncodableVectorWithOrgSpongycastleAsn1DefiniteLengthInputStream:defIn]);
        default:
        @throw new_JavaIoIOException_initWithNSString_(JreStrcat("$I$", @"unknown tag ", tagNo, @" encountered"));
      }
    }
  }
  return OrgSpongycastleAsn1ASN1InputStream_createPrimitiveDERObjectWithInt_withOrgSpongycastleAsn1DefiniteLengthInputStream_withByteArray2_(tagNo, defIn, tmpBuffers_);
}

- (OrgSpongycastleAsn1ASN1EncodableVector *)buildEncodableVector {
  OrgSpongycastleAsn1ASN1EncodableVector *v = new_OrgSpongycastleAsn1ASN1EncodableVector_init();
  OrgSpongycastleAsn1ASN1Primitive *o;
  while ((o = [self readObject]) != nil) {
    [v addWithOrgSpongycastleAsn1ASN1Encodable:o];
  }
  return v;
}

- (OrgSpongycastleAsn1ASN1EncodableVector *)buildDEREncodableVectorWithOrgSpongycastleAsn1DefiniteLengthInputStream:(OrgSpongycastleAsn1DefiniteLengthInputStream *)dIn {
  return [new_OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_(dIn) buildEncodableVector];
}

- (OrgSpongycastleAsn1ASN1Primitive *)readObject {
  jint tag = [self read];
  if (tag <= 0) {
    if (tag == 0) {
      @throw new_JavaIoIOException_initWithNSString_(@"unexpected end-of-contents marker");
    }
    return nil;
  }
  jint tagNo = OrgSpongycastleAsn1ASN1InputStream_readTagNumberWithJavaIoInputStream_withInt_(self, tag);
  jboolean isConstructed = (tag & OrgSpongycastleAsn1BERTags_CONSTRUCTED) != 0;
  jint length = [self readLength];
  if (length < 0) {
    if (!isConstructed) {
      @throw new_JavaIoIOException_initWithNSString_(@"indefinite-length primitive encoding encountered");
    }
    OrgSpongycastleAsn1IndefiniteLengthInputStream *indIn = new_OrgSpongycastleAsn1IndefiniteLengthInputStream_initWithJavaIoInputStream_withInt_(self, limit_);
    OrgSpongycastleAsn1ASN1StreamParser *sp = new_OrgSpongycastleAsn1ASN1StreamParser_initWithJavaIoInputStream_withInt_(indIn, limit_);
    if ((tag & OrgSpongycastleAsn1BERTags_APPLICATION) != 0) {
      return [new_OrgSpongycastleAsn1BERApplicationSpecificParser_initWithInt_withOrgSpongycastleAsn1ASN1StreamParser_(tagNo, sp) getLoadedObject];
    }
    if ((tag & OrgSpongycastleAsn1BERTags_TAGGED) != 0) {
      return [new_OrgSpongycastleAsn1BERTaggedObjectParser_initWithBoolean_withInt_withOrgSpongycastleAsn1ASN1StreamParser_(true, tagNo, sp) getLoadedObject];
    }
    switch (tagNo) {
      case OrgSpongycastleAsn1BERTags_OCTET_STRING:
      return [new_OrgSpongycastleAsn1BEROctetStringParser_initWithOrgSpongycastleAsn1ASN1StreamParser_(sp) getLoadedObject];
      case OrgSpongycastleAsn1BERTags_SEQUENCE:
      return [new_OrgSpongycastleAsn1BERSequenceParser_initWithOrgSpongycastleAsn1ASN1StreamParser_(sp) getLoadedObject];
      case OrgSpongycastleAsn1BERTags_SET:
      return [new_OrgSpongycastleAsn1BERSetParser_initWithOrgSpongycastleAsn1ASN1StreamParser_(sp) getLoadedObject];
      case OrgSpongycastleAsn1BERTags_EXTERNAL:
      return [new_OrgSpongycastleAsn1DERExternalParser_initWithOrgSpongycastleAsn1ASN1StreamParser_(sp) getLoadedObject];
      default:
      @throw new_JavaIoIOException_initWithNSString_(@"unknown BER object encountered");
    }
  }
  else {
    @try {
      return [self buildObjectWithInt:tag withInt:tagNo withInt:length];
    }
    @catch (JavaLangIllegalArgumentException *e) {
      @throw new_OrgSpongycastleAsn1ASN1Exception_initWithNSString_withJavaLangThrowable_(@"corrupted stream detected", e);
    }
  }
}

+ (jint)readTagNumberWithJavaIoInputStream:(JavaIoInputStream *)s
                                   withInt:(jint)tag {
  return OrgSpongycastleAsn1ASN1InputStream_readTagNumberWithJavaIoInputStream_withInt_(s, tag);
}

+ (jint)readLengthWithJavaIoInputStream:(JavaIoInputStream *)s
                                withInt:(jint)limit {
  return OrgSpongycastleAsn1ASN1InputStream_readLengthWithJavaIoInputStream_withInt_(s, limit);
}

+ (IOSByteArray *)getBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream:(OrgSpongycastleAsn1DefiniteLengthInputStream *)defIn
                                                             withByteArray2:(IOSObjectArray *)tmpBuffers {
  return OrgSpongycastleAsn1ASN1InputStream_getBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream_withByteArray2_(defIn, tmpBuffers);
}

+ (IOSCharArray *)getBMPCharBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream:(OrgSpongycastleAsn1DefiniteLengthInputStream *)defIn {
  return OrgSpongycastleAsn1ASN1InputStream_getBMPCharBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream_(defIn);
}

+ (OrgSpongycastleAsn1ASN1Primitive *)createPrimitiveDERObjectWithInt:(jint)tagNo
                     withOrgSpongycastleAsn1DefiniteLengthInputStream:(OrgSpongycastleAsn1DefiniteLengthInputStream *)defIn
                                                       withByteArray2:(IOSObjectArray *)tmpBuffers {
  return OrgSpongycastleAsn1ASN1InputStream_createPrimitiveDERObjectWithInt_withOrgSpongycastleAsn1DefiniteLengthInputStream_withByteArray2_(tagNo, defIn, tmpBuffers);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 1, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 2, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 3, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 4, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 5, -1, -1, -1, -1 },
    { NULL, "I", 0x0, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x4, -1, -1, 6, -1, -1, -1 },
    { NULL, "V", 0x4, 7, 1, 6, -1, -1, -1 },
    { NULL, "LOrgSpongycastleAsn1ASN1Primitive;", 0x4, 8, 9, 6, -1, -1, -1 },
    { NULL, "LOrgSpongycastleAsn1ASN1EncodableVector;", 0x0, -1, -1, 6, -1, -1, -1 },
    { NULL, "LOrgSpongycastleAsn1ASN1EncodableVector;", 0x0, 10, 11, 6, -1, -1, -1 },
    { NULL, "LOrgSpongycastleAsn1ASN1Primitive;", 0x1, -1, -1, 6, -1, -1, -1 },
    { NULL, "I", 0x8, 12, 3, 6, -1, -1, -1 },
    { NULL, "I", 0x8, 13, 3, 6, -1, -1, -1 },
    { NULL, "[B", 0xa, 14, 15, 6, -1, -1, -1 },
    { NULL, "[C", 0xa, 16, 11, 6, -1, -1, -1 },
    { NULL, "LOrgSpongycastleAsn1ASN1Primitive;", 0x8, 17, 18, 6, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithJavaIoInputStream:);
  methods[1].selector = @selector(initWithByteArray:);
  methods[2].selector = @selector(initWithByteArray:withBoolean:);
  methods[3].selector = @selector(initWithJavaIoInputStream:withInt:);
  methods[4].selector = @selector(initWithJavaIoInputStream:withBoolean:);
  methods[5].selector = @selector(initWithJavaIoInputStream:withInt:withBoolean:);
  methods[6].selector = @selector(getLimit);
  methods[7].selector = @selector(readLength);
  methods[8].selector = @selector(readFullyWithByteArray:);
  methods[9].selector = @selector(buildObjectWithInt:withInt:withInt:);
  methods[10].selector = @selector(buildEncodableVector);
  methods[11].selector = @selector(buildDEREncodableVectorWithOrgSpongycastleAsn1DefiniteLengthInputStream:);
  methods[12].selector = @selector(readObject);
  methods[13].selector = @selector(readTagNumberWithJavaIoInputStream:withInt:);
  methods[14].selector = @selector(readLengthWithJavaIoInputStream:withInt:);
  methods[15].selector = @selector(getBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream:withByteArray2:);
  methods[16].selector = @selector(getBMPCharBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream:);
  methods[17].selector = @selector(createPrimitiveDERObjectWithInt:withOrgSpongycastleAsn1DefiniteLengthInputStream:withByteArray2:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "limit_", "I", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "lazyEvaluate_", "Z", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "tmpBuffers_", "[[B", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LJavaIoInputStream;", "[B", "[BZ", "LJavaIoInputStream;I", "LJavaIoInputStream;Z", "LJavaIoInputStream;IZ", "LJavaIoIOException;", "readFully", "buildObject", "III", "buildDEREncodableVector", "LOrgSpongycastleAsn1DefiniteLengthInputStream;", "readTagNumber", "readLength", "getBuffer", "LOrgSpongycastleAsn1DefiniteLengthInputStream;[[B", "getBMPCharBuffer", "createPrimitiveDERObject", "ILOrgSpongycastleAsn1DefiniteLengthInputStream;[[B" };
  static const J2ObjcClassInfo _OrgSpongycastleAsn1ASN1InputStream = { "ASN1InputStream", "org.spongycastle.asn1", ptrTable, methods, fields, 7, 0x1, 18, 3, -1, -1, -1, -1, -1 };
  return &_OrgSpongycastleAsn1ASN1InputStream;
}

@end

void OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_(OrgSpongycastleAsn1ASN1InputStream *self, JavaIoInputStream *is) {
  OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_(self, is, OrgSpongycastleAsn1StreamUtil_findLimitWithJavaIoInputStream_(is));
}

OrgSpongycastleAsn1ASN1InputStream *new_OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_(JavaIoInputStream *is) {
  J2OBJC_NEW_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithJavaIoInputStream_, is)
}

OrgSpongycastleAsn1ASN1InputStream *create_OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_(JavaIoInputStream *is) {
  J2OBJC_CREATE_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithJavaIoInputStream_, is)
}

void OrgSpongycastleAsn1ASN1InputStream_initWithByteArray_(OrgSpongycastleAsn1ASN1InputStream *self, IOSByteArray *input) {
  OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_(self, new_JavaIoByteArrayInputStream_initWithByteArray_(input), ((IOSByteArray *) nil_chk(input))->size_);
}

OrgSpongycastleAsn1ASN1InputStream *new_OrgSpongycastleAsn1ASN1InputStream_initWithByteArray_(IOSByteArray *input) {
  J2OBJC_NEW_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithByteArray_, input)
}

OrgSpongycastleAsn1ASN1InputStream *create_OrgSpongycastleAsn1ASN1InputStream_initWithByteArray_(IOSByteArray *input) {
  J2OBJC_CREATE_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithByteArray_, input)
}

void OrgSpongycastleAsn1ASN1InputStream_initWithByteArray_withBoolean_(OrgSpongycastleAsn1ASN1InputStream *self, IOSByteArray *input, jboolean lazyEvaluate) {
  OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_withBoolean_(self, new_JavaIoByteArrayInputStream_initWithByteArray_(input), ((IOSByteArray *) nil_chk(input))->size_, lazyEvaluate);
}

OrgSpongycastleAsn1ASN1InputStream *new_OrgSpongycastleAsn1ASN1InputStream_initWithByteArray_withBoolean_(IOSByteArray *input, jboolean lazyEvaluate) {
  J2OBJC_NEW_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithByteArray_withBoolean_, input, lazyEvaluate)
}

OrgSpongycastleAsn1ASN1InputStream *create_OrgSpongycastleAsn1ASN1InputStream_initWithByteArray_withBoolean_(IOSByteArray *input, jboolean lazyEvaluate) {
  J2OBJC_CREATE_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithByteArray_withBoolean_, input, lazyEvaluate)
}

void OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_(OrgSpongycastleAsn1ASN1InputStream *self, JavaIoInputStream *input, jint limit) {
  OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_withBoolean_(self, input, limit, false);
}

OrgSpongycastleAsn1ASN1InputStream *new_OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_(JavaIoInputStream *input, jint limit) {
  J2OBJC_NEW_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithJavaIoInputStream_withInt_, input, limit)
}

OrgSpongycastleAsn1ASN1InputStream *create_OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_(JavaIoInputStream *input, jint limit) {
  J2OBJC_CREATE_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithJavaIoInputStream_withInt_, input, limit)
}

void OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withBoolean_(OrgSpongycastleAsn1ASN1InputStream *self, JavaIoInputStream *input, jboolean lazyEvaluate) {
  OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_withBoolean_(self, input, OrgSpongycastleAsn1StreamUtil_findLimitWithJavaIoInputStream_(input), lazyEvaluate);
}

OrgSpongycastleAsn1ASN1InputStream *new_OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withBoolean_(JavaIoInputStream *input, jboolean lazyEvaluate) {
  J2OBJC_NEW_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithJavaIoInputStream_withBoolean_, input, lazyEvaluate)
}

OrgSpongycastleAsn1ASN1InputStream *create_OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withBoolean_(JavaIoInputStream *input, jboolean lazyEvaluate) {
  J2OBJC_CREATE_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithJavaIoInputStream_withBoolean_, input, lazyEvaluate)
}

void OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_withBoolean_(OrgSpongycastleAsn1ASN1InputStream *self, JavaIoInputStream *input, jint limit, jboolean lazyEvaluate) {
  JavaIoFilterInputStream_initWithJavaIoInputStream_(self, input);
  self->limit_ = limit;
  self->lazyEvaluate_ = lazyEvaluate;
  self->tmpBuffers_ = [IOSObjectArray newArrayWithLength:11 type:IOSClass_byteArray(1)];
}

OrgSpongycastleAsn1ASN1InputStream *new_OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_withBoolean_(JavaIoInputStream *input, jint limit, jboolean lazyEvaluate) {
  J2OBJC_NEW_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithJavaIoInputStream_withInt_withBoolean_, input, limit, lazyEvaluate)
}

OrgSpongycastleAsn1ASN1InputStream *create_OrgSpongycastleAsn1ASN1InputStream_initWithJavaIoInputStream_withInt_withBoolean_(JavaIoInputStream *input, jint limit, jboolean lazyEvaluate) {
  J2OBJC_CREATE_IMPL(OrgSpongycastleAsn1ASN1InputStream, initWithJavaIoInputStream_withInt_withBoolean_, input, limit, lazyEvaluate)
}

jint OrgSpongycastleAsn1ASN1InputStream_readTagNumberWithJavaIoInputStream_withInt_(JavaIoInputStream *s, jint tag) {
  OrgSpongycastleAsn1ASN1InputStream_initialize();
  jint tagNo = tag & (jint) 0x1f;
  if (tagNo == (jint) 0x1f) {
    tagNo = 0;
    jint b = [((JavaIoInputStream *) nil_chk(s)) read];
    if ((b & (jint) 0x7f) == 0) {
      @throw new_JavaIoIOException_initWithNSString_(@"corrupted stream - invalid high tag number found");
    }
    while ((b >= 0) && ((b & (jint) 0x80) != 0)) {
      tagNo |= (b & (jint) 0x7f);
      JreLShiftAssignInt(&tagNo, 7);
      b = [s read];
    }
    if (b < 0) {
      @throw new_JavaIoEOFException_initWithNSString_(@"EOF found inside tag value.");
    }
    tagNo |= (b & (jint) 0x7f);
  }
  return tagNo;
}

jint OrgSpongycastleAsn1ASN1InputStream_readLengthWithJavaIoInputStream_withInt_(JavaIoInputStream *s, jint limit) {
  OrgSpongycastleAsn1ASN1InputStream_initialize();
  jint length = [((JavaIoInputStream *) nil_chk(s)) read];
  if (length < 0) {
    @throw new_JavaIoEOFException_initWithNSString_(@"EOF found when length expected");
  }
  if (length == (jint) 0x80) {
    return -1;
  }
  if (length > 127) {
    jint size = length & (jint) 0x7f;
    if (size > 4) {
      @throw new_JavaIoIOException_initWithNSString_(JreStrcat("$I", @"DER length more than 4 bytes: ", size));
    }
    length = 0;
    for (jint i = 0; i < size; i++) {
      jint next = [s read];
      if (next < 0) {
        @throw new_JavaIoEOFException_initWithNSString_(@"EOF found reading length");
      }
      length = (JreLShift32(length, 8)) + next;
    }
    if (length < 0) {
      @throw new_JavaIoIOException_initWithNSString_(@"corrupted stream - negative length found");
    }
    if (length >= limit) {
      @throw new_JavaIoIOException_initWithNSString_(@"corrupted stream - out of bounds length found");
    }
  }
  return length;
}

IOSByteArray *OrgSpongycastleAsn1ASN1InputStream_getBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream_withByteArray2_(OrgSpongycastleAsn1DefiniteLengthInputStream *defIn, IOSObjectArray *tmpBuffers) {
  OrgSpongycastleAsn1ASN1InputStream_initialize();
  jint len = [((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) getRemaining];
  if ([defIn getRemaining] < ((IOSObjectArray *) nil_chk(tmpBuffers))->size_) {
    IOSByteArray *buf = IOSObjectArray_Get(tmpBuffers, len);
    if (buf == nil) {
      buf = IOSObjectArray_SetAndConsume(tmpBuffers, len, [IOSByteArray newArrayWithLength:len]);
    }
    OrgSpongycastleUtilIoStreams_readFullyWithJavaIoInputStream_withByteArray_(defIn, buf);
    return buf;
  }
  else {
    return [defIn toByteArray];
  }
}

IOSCharArray *OrgSpongycastleAsn1ASN1InputStream_getBMPCharBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream_(OrgSpongycastleAsn1DefiniteLengthInputStream *defIn) {
  OrgSpongycastleAsn1ASN1InputStream_initialize();
  jint len = [((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) getRemaining] / 2;
  IOSCharArray *buf = [IOSCharArray newArrayWithLength:len];
  jint totalRead = 0;
  while (totalRead < len) {
    jint ch1 = [defIn read];
    if (ch1 < 0) {
      break;
    }
    jint ch2 = [defIn read];
    if (ch2 < 0) {
      break;
    }
    *IOSCharArray_GetRef(buf, totalRead++) = (jchar) ((JreLShift32(ch1, 8)) | (ch2 & (jint) 0xff));
  }
  return buf;
}

OrgSpongycastleAsn1ASN1Primitive *OrgSpongycastleAsn1ASN1InputStream_createPrimitiveDERObjectWithInt_withOrgSpongycastleAsn1DefiniteLengthInputStream_withByteArray2_(jint tagNo, OrgSpongycastleAsn1DefiniteLengthInputStream *defIn, IOSObjectArray *tmpBuffers) {
  OrgSpongycastleAsn1ASN1InputStream_initialize();
  switch (tagNo) {
    case OrgSpongycastleAsn1BERTags_BIT_STRING:
    return OrgSpongycastleAsn1ASN1BitString_fromInputStreamWithInt_withJavaIoInputStream_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) getRemaining], defIn);
    case OrgSpongycastleAsn1BERTags_BMP_STRING:
    return new_OrgSpongycastleAsn1DERBMPString_initWithCharArray_(OrgSpongycastleAsn1ASN1InputStream_getBMPCharBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream_(defIn));
    case OrgSpongycastleAsn1BERTags_BOOLEAN:
    return OrgSpongycastleAsn1ASN1Boolean_fromOctetStringWithByteArray_(OrgSpongycastleAsn1ASN1InputStream_getBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream_withByteArray2_(defIn, tmpBuffers));
    case OrgSpongycastleAsn1BERTags_ENUMERATED:
    return OrgSpongycastleAsn1ASN1Enumerated_fromOctetStringWithByteArray_(OrgSpongycastleAsn1ASN1InputStream_getBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream_withByteArray2_(defIn, tmpBuffers));
    case OrgSpongycastleAsn1BERTags_GENERALIZED_TIME:
    return new_OrgSpongycastleAsn1ASN1GeneralizedTime_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_GENERAL_STRING:
    return new_OrgSpongycastleAsn1DERGeneralString_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_IA5_STRING:
    return new_OrgSpongycastleAsn1DERIA5String_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_INTEGER:
    return new_OrgSpongycastleAsn1ASN1Integer_initWithByteArray_withBoolean_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray], false);
    case OrgSpongycastleAsn1BERTags_NULL:
    return JreLoadStatic(OrgSpongycastleAsn1DERNull, INSTANCE);
    case OrgSpongycastleAsn1BERTags_NUMERIC_STRING:
    return new_OrgSpongycastleAsn1DERNumericString_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_OBJECT_IDENTIFIER:
    return OrgSpongycastleAsn1ASN1ObjectIdentifier_fromOctetStringWithByteArray_(OrgSpongycastleAsn1ASN1InputStream_getBufferWithOrgSpongycastleAsn1DefiniteLengthInputStream_withByteArray2_(defIn, tmpBuffers));
    case OrgSpongycastleAsn1BERTags_OCTET_STRING:
    return new_OrgSpongycastleAsn1DEROctetString_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_PRINTABLE_STRING:
    return new_OrgSpongycastleAsn1DERPrintableString_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_T61_STRING:
    return new_OrgSpongycastleAsn1DERT61String_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_UNIVERSAL_STRING:
    return new_OrgSpongycastleAsn1DERUniversalString_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_UTC_TIME:
    return new_OrgSpongycastleAsn1ASN1UTCTime_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_UTF8_STRING:
    return new_OrgSpongycastleAsn1DERUTF8String_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_VISIBLE_STRING:
    return new_OrgSpongycastleAsn1DERVisibleString_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_GRAPHIC_STRING:
    return new_OrgSpongycastleAsn1DERGraphicString_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    case OrgSpongycastleAsn1BERTags_VIDEOTEX_STRING:
    return new_OrgSpongycastleAsn1DERVideotexString_initWithByteArray_([((OrgSpongycastleAsn1DefiniteLengthInputStream *) nil_chk(defIn)) toByteArray]);
    default:
    @throw new_JavaIoIOException_initWithNSString_(JreStrcat("$I$", @"unknown tag ", tagNo, @" encountered"));
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgSpongycastleAsn1ASN1InputStream)
