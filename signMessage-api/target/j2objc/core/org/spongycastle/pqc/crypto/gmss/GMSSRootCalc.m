//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/alen/Downloads/signMessage-api/target/classes/core/org/spongycastle/pqc/crypto/gmss/GMSSRootCalc.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/PrintStream.h"
#include "java/lang/Integer.h"
#include "java/lang/System.h"
#include "java/util/Enumeration.h"
#include "java/util/Vector.h"
#include "org/spongycastle/crypto/Digest.h"
#include "org/spongycastle/pqc/crypto/gmss/GMSSDigestProvider.h"
#include "org/spongycastle/pqc/crypto/gmss/GMSSRootCalc.h"
#include "org/spongycastle/pqc/crypto/gmss/GMSSUtils.h"
#include "org/spongycastle/pqc/crypto/gmss/Treehash.h"
#include "org/spongycastle/util/Arrays.h"
#include "org/spongycastle/util/Integers.h"
#include "org/spongycastle/util/encoders/Hex.h"

@interface OrgSpongycastlePqcCryptoGmssGMSSRootCalc () {
 @public
  jint heightOfTree_;
  jint mdLength_;
  IOSObjectArray *treehash_;
  IOSObjectArray *retain__;
  IOSByteArray *root_;
  IOSObjectArray *AuthPath_;
  jint K_;
  JavaUtilVector *tailStack_;
  JavaUtilVector *heightOfNodes_;
  id<OrgSpongycastleCryptoDigest> messDigestTree_;
  id<OrgSpongycastlePqcCryptoGmssGMSSDigestProvider> digestProvider_;
  IOSIntArray *index_;
  jboolean isInitialized_;
  jboolean isFinished_;
  jint indexForNextSeed_;
  jint heightOfNextSeed_;
}

@end

J2OBJC_FIELD_SETTER(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, treehash_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, retain__, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, root_, IOSByteArray *)
J2OBJC_FIELD_SETTER(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, AuthPath_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, tailStack_, JavaUtilVector *)
J2OBJC_FIELD_SETTER(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, heightOfNodes_, JavaUtilVector *)
J2OBJC_FIELD_SETTER(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, messDigestTree_, id<OrgSpongycastleCryptoDigest>)
J2OBJC_FIELD_SETTER(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, digestProvider_, id<OrgSpongycastlePqcCryptoGmssGMSSDigestProvider>)
J2OBJC_FIELD_SETTER(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, index_, IOSIntArray *)

@implementation OrgSpongycastlePqcCryptoGmssGMSSRootCalc

- (instancetype)initWithOrgSpongycastleCryptoDigest:(id<OrgSpongycastleCryptoDigest>)digest
                                     withByteArray2:(IOSObjectArray *)statByte
                                       withIntArray:(IOSIntArray *)statInt
      withOrgSpongycastlePqcCryptoGmssTreehashArray:(IOSObjectArray *)treeH
                            withJavaUtilVectorArray:(IOSObjectArray *)ret {
  OrgSpongycastlePqcCryptoGmssGMSSRootCalc_initWithOrgSpongycastleCryptoDigest_withByteArray2_withIntArray_withOrgSpongycastlePqcCryptoGmssTreehashArray_withJavaUtilVectorArray_(self, digest, statByte, statInt, treeH, ret);
  return self;
}

- (instancetype)initWithInt:(jint)heightOfTree
                    withInt:(jint)K
withOrgSpongycastlePqcCryptoGmssGMSSDigestProvider:(id<OrgSpongycastlePqcCryptoGmssGMSSDigestProvider>)digestProvider {
  OrgSpongycastlePqcCryptoGmssGMSSRootCalc_initWithInt_withInt_withOrgSpongycastlePqcCryptoGmssGMSSDigestProvider_(self, heightOfTree, K, digestProvider);
  return self;
}

- (void)initialize__WithJavaUtilVector:(JavaUtilVector *)sharedStack {
  self->treehash_ = [IOSObjectArray newArrayWithLength:self->heightOfTree_ - self->K_ type:OrgSpongycastlePqcCryptoGmssTreehash_class_()];
  for (jint i = 0; i < self->heightOfTree_ - self->K_; i++) {
    (void) IOSObjectArray_SetAndConsume(nil_chk(self->treehash_), i, new_OrgSpongycastlePqcCryptoGmssTreehash_initWithJavaUtilVector_withInt_withOrgSpongycastleCryptoDigest_(sharedStack, i, [((id<OrgSpongycastlePqcCryptoGmssGMSSDigestProvider>) nil_chk(self->digestProvider_)) get]));
  }
  self->index_ = [IOSIntArray newArrayWithLength:heightOfTree_];
  self->AuthPath_ = [IOSByteArray newArrayWithDimensions:2 lengths:(jint[]){ heightOfTree_, mdLength_ }];
  self->root_ = [IOSByteArray newArrayWithLength:mdLength_];
  self->tailStack_ = new_JavaUtilVector_init();
  self->heightOfNodes_ = new_JavaUtilVector_init();
  self->isInitialized_ = true;
  self->isFinished_ = false;
  for (jint i = 0; i < heightOfTree_; i++) {
    *IOSIntArray_GetRef(nil_chk(self->index_), i) = -1;
  }
  self->retain__ = [IOSObjectArray newArrayWithLength:self->K_ - 1 type:JavaUtilVector_class_()];
  for (jint i = 0; i < K_ - 1; i++) {
    (void) IOSObjectArray_SetAndConsume(nil_chk(self->retain__), i, new_JavaUtilVector_init());
  }
  self->indexForNextSeed_ = 3;
  self->heightOfNextSeed_ = 0;
}

- (void)updateWithByteArray:(IOSByteArray *)seed
              withByteArray:(IOSByteArray *)leaf {
  if (self->heightOfNextSeed_ < (self->heightOfTree_ - self->K_) && self->indexForNextSeed_ - 2 == IOSIntArray_Get(nil_chk(index_), 0)) {
    [self initializeTreehashSeedWithByteArray:seed withInt:self->heightOfNextSeed_];
    self->heightOfNextSeed_++;
    self->indexForNextSeed_ *= 2;
  }
  [self updateWithByteArray:leaf];
}

- (void)updateWithByteArray:(IOSByteArray *)leaf {
  if (isFinished_) {
    [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printWithNSString:@"Too much updates for Tree!!"];
    return;
  }
  if (!isInitialized_) {
    [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, err))) printlnWithNSString:@"GMSSRootCalc not initialized!"];
    return;
  }
  (*IOSIntArray_GetRef(nil_chk(index_), 0))++;
  if (IOSIntArray_Get(index_, 0) == 1) {
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(leaf, 0, IOSObjectArray_Get(nil_chk(AuthPath_), 0), 0, mdLength_);
  }
  else if (IOSIntArray_Get(index_, 0) == 3) {
    if (heightOfTree_ > K_) {
      [((OrgSpongycastlePqcCryptoGmssTreehash *) nil_chk(IOSObjectArray_Get(nil_chk(treehash_), 0))) setFirstNodeWithByteArray:leaf];
    }
  }
  if ((IOSIntArray_Get(nil_chk(index_), 0) - 3) % 2 == 0 && IOSIntArray_Get(index_, 0) >= 3) {
    if (heightOfTree_ == K_) {
      [((JavaUtilVector *) nil_chk(IOSObjectArray_Get(nil_chk(retain__), 0))) insertElementAtWithId:leaf withInt:0];
    }
  }
  if (IOSIntArray_Get(nil_chk(index_), 0) == 0) {
    [((JavaUtilVector *) nil_chk(tailStack_)) addElementWithId:leaf];
    [((JavaUtilVector *) nil_chk(heightOfNodes_)) addElementWithId:OrgSpongycastleUtilIntegers_valueOfWithInt_(0)];
  }
  else {
    IOSByteArray *help = [IOSByteArray newArrayWithLength:mdLength_];
    IOSByteArray *toBeHashed = [IOSByteArray newArrayWithLength:JreLShift32(mdLength_, 1)];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(leaf, 0, help, 0, mdLength_);
    jint helpHeight = 0;
    while ([((JavaUtilVector *) nil_chk(tailStack_)) size] > 0 && helpHeight == [((JavaLangInteger *) nil_chk(((JavaLangInteger *) cast_chk([((JavaUtilVector *) nil_chk(heightOfNodes_)) lastElement], [JavaLangInteger class])))) intValue]) {
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_([((JavaUtilVector *) nil_chk(tailStack_)) lastElement], 0, toBeHashed, 0, mdLength_);
      [((JavaUtilVector *) nil_chk(tailStack_)) removeElementAtWithInt:[tailStack_ size] - 1];
      [((JavaUtilVector *) nil_chk(heightOfNodes_)) removeElementAtWithInt:[heightOfNodes_ size] - 1];
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(help, 0, toBeHashed, mdLength_, mdLength_);
      [((id<OrgSpongycastleCryptoDigest>) nil_chk(messDigestTree_)) updateWithByteArray:toBeHashed withInt:0 withInt:toBeHashed->size_];
      help = [IOSByteArray newArrayWithLength:[((id<OrgSpongycastleCryptoDigest>) nil_chk(messDigestTree_)) getDigestSize]];
      [((id<OrgSpongycastleCryptoDigest>) nil_chk(messDigestTree_)) doFinalWithByteArray:help withInt:0];
      helpHeight++;
      if (helpHeight < heightOfTree_) {
        (*IOSIntArray_GetRef(nil_chk(index_), helpHeight))++;
        if (IOSIntArray_Get(index_, helpHeight) == 1) {
          JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(help, 0, IOSObjectArray_Get(nil_chk(AuthPath_), helpHeight), 0, mdLength_);
        }
        if (helpHeight >= heightOfTree_ - K_) {
          if (helpHeight == 0) {
            [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:@"M\ufffd\ufffd\ufffdP"];
          }
          if ((IOSIntArray_Get(nil_chk(index_), helpHeight) - 3) % 2 == 0 && IOSIntArray_Get(index_, helpHeight) >= 3) {
            [((JavaUtilVector *) nil_chk(IOSObjectArray_Get(nil_chk(retain__), helpHeight - (heightOfTree_ - K_)))) insertElementAtWithId:help withInt:0];
          }
        }
        else {
          if (IOSIntArray_Get(nil_chk(index_), helpHeight) == 3) {
            [((OrgSpongycastlePqcCryptoGmssTreehash *) nil_chk(IOSObjectArray_Get(nil_chk(treehash_), helpHeight))) setFirstNodeWithByteArray:help];
          }
        }
      }
    }
    [((JavaUtilVector *) nil_chk(tailStack_)) addElementWithId:help];
    [((JavaUtilVector *) nil_chk(heightOfNodes_)) addElementWithId:OrgSpongycastleUtilIntegers_valueOfWithInt_(helpHeight)];
    if (helpHeight == heightOfTree_) {
      isFinished_ = true;
      isInitialized_ = false;
      root_ = (IOSByteArray *) cast_chk([((JavaUtilVector *) nil_chk(tailStack_)) lastElement], [IOSByteArray class]);
    }
  }
}

- (void)initializeTreehashSeedWithByteArray:(IOSByteArray *)seed
                                    withInt:(jint)index {
  [((OrgSpongycastlePqcCryptoGmssTreehash *) nil_chk(IOSObjectArray_Get(nil_chk(treehash_), index))) initializeSeedWithByteArray:seed];
}

- (jboolean)wasInitialized {
  return isInitialized_;
}

- (jboolean)wasFinished {
  return isFinished_;
}

- (IOSObjectArray *)getAuthPath {
  return OrgSpongycastlePqcCryptoGmssGMSSUtils_cloneWithByteArray2_(AuthPath_);
}

- (IOSObjectArray *)getTreehash {
  return OrgSpongycastlePqcCryptoGmssGMSSUtils_cloneWithOrgSpongycastlePqcCryptoGmssTreehashArray_(treehash_);
}

- (IOSObjectArray *)getRetain {
  return OrgSpongycastlePqcCryptoGmssGMSSUtils_cloneWithJavaUtilVectorArray_(retain__);
}

- (IOSByteArray *)getRoot {
  return OrgSpongycastleUtilArrays_cloneWithByteArray_(root_);
}

- (JavaUtilVector *)getStack {
  JavaUtilVector *copy_ = new_JavaUtilVector_init();
  for (id<JavaUtilEnumeration> en = [((JavaUtilVector *) nil_chk(tailStack_)) elements]; [((id<JavaUtilEnumeration>) nil_chk(en)) hasMoreElements]; ) {
    [copy_ addElementWithId:[en nextElement]];
  }
  return copy_;
}

- (IOSObjectArray *)getStatByte {
  jint tailLength;
  if (tailStack_ == nil) {
    tailLength = 0;
  }
  else {
    tailLength = [tailStack_ size];
  }
  IOSObjectArray *statByte = [IOSByteArray newArrayWithDimensions:2 lengths:(jint[]){ 1 + heightOfTree_ + tailLength, 64 }];
  (void) IOSObjectArray_Set(statByte, 0, root_);
  for (jint i = 0; i < heightOfTree_; i++) {
    (void) IOSObjectArray_Set(statByte, 1 + i, IOSObjectArray_Get(nil_chk(AuthPath_), i));
  }
  for (jint i = 0; i < tailLength; i++) {
    (void) IOSObjectArray_Set(statByte, 1 + heightOfTree_ + i, (IOSByteArray *) cast_chk([((JavaUtilVector *) nil_chk(tailStack_)) elementAtWithInt:i], [IOSByteArray class]));
  }
  return statByte;
}

- (IOSIntArray *)getStatInt {
  jint tailLength;
  if (tailStack_ == nil) {
    tailLength = 0;
  }
  else {
    tailLength = [tailStack_ size];
  }
  IOSIntArray *statInt = [IOSIntArray newArrayWithLength:8 + heightOfTree_ + tailLength];
  *IOSIntArray_GetRef(statInt, 0) = heightOfTree_;
  *IOSIntArray_GetRef(statInt, 1) = mdLength_;
  *IOSIntArray_GetRef(statInt, 2) = K_;
  *IOSIntArray_GetRef(statInt, 3) = indexForNextSeed_;
  *IOSIntArray_GetRef(statInt, 4) = heightOfNextSeed_;
  if (isFinished_) {
    *IOSIntArray_GetRef(statInt, 5) = 1;
  }
  else {
    *IOSIntArray_GetRef(statInt, 5) = 0;
  }
  if (isInitialized_) {
    *IOSIntArray_GetRef(statInt, 6) = 1;
  }
  else {
    *IOSIntArray_GetRef(statInt, 6) = 0;
  }
  *IOSIntArray_GetRef(statInt, 7) = tailLength;
  for (jint i = 0; i < heightOfTree_; i++) {
    *IOSIntArray_GetRef(statInt, 8 + i) = IOSIntArray_Get(nil_chk(index_), i);
  }
  for (jint i = 0; i < tailLength; i++) {
    *IOSIntArray_GetRef(statInt, 8 + heightOfTree_ + i) = [((JavaLangInteger *) nil_chk(((JavaLangInteger *) cast_chk([((JavaUtilVector *) nil_chk(heightOfNodes_)) elementAtWithInt:i], [JavaLangInteger class])))) intValue];
  }
  return statInt;
}

- (NSString *)description {
  NSString *out = @"";
  jint tailLength;
  if (tailStack_ == nil) {
    tailLength = 0;
  }
  else {
    tailLength = [tailStack_ size];
  }
  for (jint i = 0; i < 8 + heightOfTree_ + tailLength; i++) {
    out = JreStrcat("$IC", out, IOSIntArray_Get(nil_chk([self getStatInt]), i), ' ');
  }
  for (jint i = 0; i < 1 + heightOfTree_ + tailLength; i++) {
    out = JreStrcat("$$C", out, [NSString java_stringWithBytes:OrgSpongycastleUtilEncodersHex_encodeWithByteArray_(IOSObjectArray_Get(nil_chk([self getStatByte]), i))], ' ');
  }
  out = JreStrcat("$$I", out, @"  ", [((id<OrgSpongycastleCryptoDigest>) nil_chk([((id<OrgSpongycastlePqcCryptoGmssGMSSDigestProvider>) nil_chk(digestProvider_)) get])) getDigestSize]);
  return out;
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 2, 3, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 4, 5, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 4, 6, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 7, 8, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "[[B", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "[LOrgSpongycastlePqcCryptoGmssTreehash;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "[LJavaUtilVector;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "[B", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LJavaUtilVector;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "[[B", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "[I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, 9, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgSpongycastleCryptoDigest:withByteArray2:withIntArray:withOrgSpongycastlePqcCryptoGmssTreehashArray:withJavaUtilVectorArray:);
  methods[1].selector = @selector(initWithInt:withInt:withOrgSpongycastlePqcCryptoGmssGMSSDigestProvider:);
  methods[2].selector = @selector(initialize__WithJavaUtilVector:);
  methods[3].selector = @selector(updateWithByteArray:withByteArray:);
  methods[4].selector = @selector(updateWithByteArray:);
  methods[5].selector = @selector(initializeTreehashSeedWithByteArray:withInt:);
  methods[6].selector = @selector(wasInitialized);
  methods[7].selector = @selector(wasFinished);
  methods[8].selector = @selector(getAuthPath);
  methods[9].selector = @selector(getTreehash);
  methods[10].selector = @selector(getRetain);
  methods[11].selector = @selector(getRoot);
  methods[12].selector = @selector(getStack);
  methods[13].selector = @selector(getStatByte);
  methods[14].selector = @selector(getStatInt);
  methods[15].selector = @selector(description);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "heightOfTree_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mdLength_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "treehash_", "[LOrgSpongycastlePqcCryptoGmssTreehash;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "retain__", "[LJavaUtilVector;", .constantValue.asLong = 0, 0x2, 10, -1, -1, -1 },
    { "root_", "[B", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "AuthPath_", "[[B", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "K_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "tailStack_", "LJavaUtilVector;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "heightOfNodes_", "LJavaUtilVector;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "messDigestTree_", "LOrgSpongycastleCryptoDigest;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "digestProvider_", "LOrgSpongycastlePqcCryptoGmssGMSSDigestProvider;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "index_", "[I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "isInitialized_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "isFinished_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "indexForNextSeed_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "heightOfNextSeed_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgSpongycastleCryptoDigest;[[B[I[LOrgSpongycastlePqcCryptoGmssTreehash;[LJavaUtilVector;", "IILOrgSpongycastlePqcCryptoGmssGMSSDigestProvider;", "initialize", "LJavaUtilVector;", "update", "[B[B", "[B", "initializeTreehashSeed", "[BI", "toString", "retain" };
  static const J2ObjcClassInfo _OrgSpongycastlePqcCryptoGmssGMSSRootCalc = { "GMSSRootCalc", "org.spongycastle.pqc.crypto.gmss", ptrTable, methods, fields, 7, 0x1, 16, 16, -1, -1, -1, -1, -1 };
  return &_OrgSpongycastlePqcCryptoGmssGMSSRootCalc;
}

@end

void OrgSpongycastlePqcCryptoGmssGMSSRootCalc_initWithOrgSpongycastleCryptoDigest_withByteArray2_withIntArray_withOrgSpongycastlePqcCryptoGmssTreehashArray_withJavaUtilVectorArray_(OrgSpongycastlePqcCryptoGmssGMSSRootCalc *self, id<OrgSpongycastleCryptoDigest> digest, IOSObjectArray *statByte, IOSIntArray *statInt, IOSObjectArray *treeH, IOSObjectArray *ret) {
  NSObject_init(self);
  self->messDigestTree_ = [((id<OrgSpongycastlePqcCryptoGmssGMSSDigestProvider>) nil_chk(self->digestProvider_)) get];
  self->digestProvider_ = self->digestProvider_;
  self->heightOfTree_ = IOSIntArray_Get(nil_chk(statInt), 0);
  self->mdLength_ = IOSIntArray_Get(statInt, 1);
  self->K_ = IOSIntArray_Get(statInt, 2);
  self->indexForNextSeed_ = IOSIntArray_Get(statInt, 3);
  self->heightOfNextSeed_ = IOSIntArray_Get(statInt, 4);
  if (IOSIntArray_Get(statInt, 5) == 1) {
    self->isFinished_ = true;
  }
  else {
    self->isFinished_ = false;
  }
  if (IOSIntArray_Get(statInt, 6) == 1) {
    self->isInitialized_ = true;
  }
  else {
    self->isInitialized_ = false;
  }
  jint tailLength = IOSIntArray_Get(statInt, 7);
  self->index_ = [IOSIntArray newArrayWithLength:self->heightOfTree_];
  for (jint i = 0; i < self->heightOfTree_; i++) {
    *IOSIntArray_GetRef(self->index_, i) = IOSIntArray_Get(statInt, 8 + i);
  }
  self->heightOfNodes_ = new_JavaUtilVector_init();
  for (jint i = 0; i < tailLength; i++) {
    [((JavaUtilVector *) nil_chk(self->heightOfNodes_)) addElementWithId:OrgSpongycastleUtilIntegers_valueOfWithInt_(IOSIntArray_Get(statInt, 8 + self->heightOfTree_ + i))];
  }
  self->root_ = IOSObjectArray_Get(nil_chk(statByte), 0);
  self->AuthPath_ = [IOSByteArray newArrayWithDimensions:2 lengths:(jint[]){ self->heightOfTree_, self->mdLength_ }];
  for (jint i = 0; i < self->heightOfTree_; i++) {
    (void) IOSObjectArray_Set(self->AuthPath_, i, IOSObjectArray_Get(statByte, 1 + i));
  }
  self->tailStack_ = new_JavaUtilVector_init();
  for (jint i = 0; i < tailLength; i++) {
    [((JavaUtilVector *) nil_chk(self->tailStack_)) addElementWithId:IOSObjectArray_Get(statByte, 1 + self->heightOfTree_ + i)];
  }
  self->treehash_ = OrgSpongycastlePqcCryptoGmssGMSSUtils_cloneWithOrgSpongycastlePqcCryptoGmssTreehashArray_(treeH);
  self->retain__ = OrgSpongycastlePqcCryptoGmssGMSSUtils_cloneWithJavaUtilVectorArray_(ret);
}

OrgSpongycastlePqcCryptoGmssGMSSRootCalc *new_OrgSpongycastlePqcCryptoGmssGMSSRootCalc_initWithOrgSpongycastleCryptoDigest_withByteArray2_withIntArray_withOrgSpongycastlePqcCryptoGmssTreehashArray_withJavaUtilVectorArray_(id<OrgSpongycastleCryptoDigest> digest, IOSObjectArray *statByte, IOSIntArray *statInt, IOSObjectArray *treeH, IOSObjectArray *ret) {
  J2OBJC_NEW_IMPL(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, initWithOrgSpongycastleCryptoDigest_withByteArray2_withIntArray_withOrgSpongycastlePqcCryptoGmssTreehashArray_withJavaUtilVectorArray_, digest, statByte, statInt, treeH, ret)
}

OrgSpongycastlePqcCryptoGmssGMSSRootCalc *create_OrgSpongycastlePqcCryptoGmssGMSSRootCalc_initWithOrgSpongycastleCryptoDigest_withByteArray2_withIntArray_withOrgSpongycastlePqcCryptoGmssTreehashArray_withJavaUtilVectorArray_(id<OrgSpongycastleCryptoDigest> digest, IOSObjectArray *statByte, IOSIntArray *statInt, IOSObjectArray *treeH, IOSObjectArray *ret) {
  J2OBJC_CREATE_IMPL(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, initWithOrgSpongycastleCryptoDigest_withByteArray2_withIntArray_withOrgSpongycastlePqcCryptoGmssTreehashArray_withJavaUtilVectorArray_, digest, statByte, statInt, treeH, ret)
}

void OrgSpongycastlePqcCryptoGmssGMSSRootCalc_initWithInt_withInt_withOrgSpongycastlePqcCryptoGmssGMSSDigestProvider_(OrgSpongycastlePqcCryptoGmssGMSSRootCalc *self, jint heightOfTree, jint K, id<OrgSpongycastlePqcCryptoGmssGMSSDigestProvider> digestProvider) {
  NSObject_init(self);
  self->heightOfTree_ = heightOfTree;
  self->digestProvider_ = digestProvider;
  self->messDigestTree_ = [((id<OrgSpongycastlePqcCryptoGmssGMSSDigestProvider>) nil_chk(digestProvider)) get];
  self->mdLength_ = [((id<OrgSpongycastleCryptoDigest>) nil_chk(self->messDigestTree_)) getDigestSize];
  self->K_ = K;
  self->index_ = [IOSIntArray newArrayWithLength:heightOfTree];
  self->AuthPath_ = [IOSByteArray newArrayWithDimensions:2 lengths:(jint[]){ heightOfTree, self->mdLength_ }];
  self->root_ = [IOSByteArray newArrayWithLength:self->mdLength_];
  self->retain__ = [IOSObjectArray newArrayWithLength:self->K_ - 1 type:JavaUtilVector_class_()];
  for (jint i = 0; i < K - 1; i++) {
    (void) IOSObjectArray_SetAndConsume(nil_chk(self->retain__), i, new_JavaUtilVector_init());
  }
}

OrgSpongycastlePqcCryptoGmssGMSSRootCalc *new_OrgSpongycastlePqcCryptoGmssGMSSRootCalc_initWithInt_withInt_withOrgSpongycastlePqcCryptoGmssGMSSDigestProvider_(jint heightOfTree, jint K, id<OrgSpongycastlePqcCryptoGmssGMSSDigestProvider> digestProvider) {
  J2OBJC_NEW_IMPL(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, initWithInt_withInt_withOrgSpongycastlePqcCryptoGmssGMSSDigestProvider_, heightOfTree, K, digestProvider)
}

OrgSpongycastlePqcCryptoGmssGMSSRootCalc *create_OrgSpongycastlePqcCryptoGmssGMSSRootCalc_initWithInt_withInt_withOrgSpongycastlePqcCryptoGmssGMSSDigestProvider_(jint heightOfTree, jint K, id<OrgSpongycastlePqcCryptoGmssGMSSDigestProvider> digestProvider) {
  J2OBJC_CREATE_IMPL(OrgSpongycastlePqcCryptoGmssGMSSRootCalc, initWithInt_withInt_withOrgSpongycastlePqcCryptoGmssGMSSDigestProvider_, heightOfTree, K, digestProvider)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgSpongycastlePqcCryptoGmssGMSSRootCalc)
